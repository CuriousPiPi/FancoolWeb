/* =========================================================
   Right Card (右侧主容器) 专用样式
   依赖：先加载 fancool.css，再加载本文件
   作用域：仅限 .fc-right-card 及其子元素
   ========================================================= */

/* 1) 右侧主容器定高 */
.fc-right-card {
  display: flex;
  flex-direction: column;
  height: clamp(480px, 62vh, 600px);
  min-height: 0;
  min-width: 0;
}

@media (max-width: 600px) {
  .fc-right-card {height: clamp(500px, 80vh, 650px);}
}

/* 2) 右侧页签排布 */
.fc-right-card > nav.fc-tabs { margin-bottom: 6px; }

.fc-tabs[data-tab-group="right-panel"] {
  flex-wrap: wrap;
}
.fc-tabs[data-tab-group="right-panel"] .fc-tabs__primary-group {
  display: flex;
  flex-wrap: nowrap;
  gap: .5rem;
  flex: 1 1 auto;
  min-width: 0;
}
.fc-tabs[data-tab-group="right-panel"] .fc-tabs__primary-group .fc-tabs__item {
  flex: 0 0 auto !important;
}

/* 窄容器（rp-narrow）布局 */
.fc-right-card.rp-narrow > nav.fc-tabs {
  flex-wrap: wrap;
  row-gap: 8px;
  column-gap: 10px;
  align-items: flex-start;
}
.fc-right-card.rp-narrow > nav.fc-tabs .flex-1 { display: none; }
.fc-right-card.rp-narrow > nav.fc-tabs .fc-tabs__item {
  flex: 1 1 calc(50% - 10px);
  text-align: center;
  padding: .55rem .8rem;
}
.fc-right-card.rp-narrow .fc-tabs__subseg {
  order:3;
  flex:1 1 100%;
  width:100%;
  display:flex;
  justify-content:center;
  margin-top:2px;
}
.fc-right-card.rp-narrow .fc-rank-box { padding-top:0; }
.fc-right-card.rp-narrow > nav.fc-tabs[data-tab-group="right-panel"] .fc-tabs__primary-group {
  flex: 1 1 100%;
  width: 100%;
  justify-content: space-between;
}
.fc-right-card.rp-narrow > nav.fc-tabs[data-tab-group="right-panel"] .fc-tabs__primary-group .fc-tabs__item {
  flex: 1 1 0 !important;
  text-align: center;
}

/* 屏幕宽度 ≤600px 时的布局 */
@media (max-width: 600px) {
  .fc-right-card > nav.fc-tabs { margin-bottom: 4px; }
  .fc-tabs[data-tab-group="right-panel"] .fc-tabs__primary-group {
    flex: 1 1 100%;
    width: 100%;
    justify-content: space-between;
  }
  .fc-tabs[data-tab-group="right-panel"] .fc-tabs__primary-group .fc-tabs__item {
    flex: 1 1 0 !important;
    text-align: center;
  }
}

/* 3) 内容区 Flex 高度链 */
.fc-right-card .fc-tab-container {
  flex: 1 1 auto;
  min-height: 0;
}
.fc-right-card .fc-tab-wrapper,
.fc-right-card .fc-tab-pane {
  height: 100%;
}
.fc-right-card .fc-tab-pane {
  display: flex;
  flex-direction: column;
}
.fc-right-card .fc-rank-box {
  flex: 1 1 auto;
  min-height: 0;
  padding-top: 0;
  display: flex;
  flex-direction: column;
}
.fc-right-card .fc-rank-panel.active {
  display: flex;
  flex-direction: column;
  flex: 1 1 auto;
  min-height: 0;
}

/* 4) 滚动层 */
.fc-right-card .fc-rank-scroll {
  flex: 1 1 auto;
  min-height: 0;
  overflow: auto;
  max-height: none !important;
  -webkit-overflow-scrolling: touch;
  scrollbar-gutter: stable both-edges;
}

.fc-right-card .fc-rank-scroll::-webkit-scrollbar { width: 8px; }
.fc-right-card .fc-rank-scroll::-webkit-scrollbar-thumb {
  background: var(--border-color);
  border-radius: 4px;
}
.fc-right-card .fc-rank-scroll::-webkit-scrollbar-thumb:hover {
  background: var(--text-secondary);
}

/* 5) 表头/操作列与遮罩 */
.fc-right-card .fc-rank-table thead th {
  position: sticky;
  top: 0;
  z-index: 8;
  background: var(--bg-secondary);
  box-shadow: 0 2px 3px -1px rgba(0,0,0,.08);
}
[data-theme="dark"] .fc-right-card .fc-rank-table thead th {
  box-shadow: 0 2px 3px -1px rgba(0,0,0,.45);
  backdrop-filter:saturate(120%) blur(8px);
}

.fc-right-card .fc-rank-table thead th:last-child {
  top: 0;
  z-index: 11;
  box-shadow: 0 2px 3px -1px rgba(0,0,0,.45);
}
.fc-right-card .fc-rank-table th:last-child,
.fc-right-card .fc-rank-table td:last-child {
  text-align: center;
  width: 60px;
  position: sticky;
  right: 0;
  background: var(--bg-secondary);
}
.fc-right-card .fc-rank-table td:last-child {
  padding: 8px;
  background: linear-gradient(to left, transparent 30px, rgba(0,0,0,0) 50px);
}

.fc-right-card .fc-rank-box { position: relative; }
.fc-right-card .fc-rank-box::after {
  content: "";
  position: absolute;
  top: 0; right: -2px; bottom: 0;
  width: calc(var(--sbw) + 3px);
  background: transparent;
  pointer-events: none;
  z-index: 20;
}

/* 响应式 ≤600px */
@media (max-width:600px) {
  .fc-tabs {
    flex-wrap:wrap;
    row-gap:8px;
    column-gap:10px;
    align-items:flex-start;
  }
  .fc-tabs .flex-1 { display:none; }
  .fc-tabs .fc-tabs__item {
    flex:1 1 calc(50% - 10px);
    text-align:center;
    padding:.55rem .8rem;
  }
  .fc-tabs__subseg {
    order:3;
    flex:1 1 100%;
    width:100%;
    display:flex;
    justify-content:center;
    margin-top:2px;
  }
  .fc-right-card > nav.fc-tabs { margin-bottom:4px; }
  .fc-right-card .fc-rank-box { padding-top:0; }

  /* ≤600px 时，继续确保三大页签不被拆到两行（仅对 right-panel 生效） */
  .fc-tabs[data-tab-group="right-panel"] .fc-tabs__primary-group {
    flex: 1 1 100%;
    width: 100%;
    justify-content: space-between;
  }
  .fc-tabs[data-tab-group="right-panel"] .fc-tabs__primary-group .fc-tabs__item {
    flex: 1 1 0 !important;   /* 三项等分一行 */
    text-align: center;
  }
}

/* 6) 右侧主页签：横向滑动切换（Scroll Snap） */
#right-panel-container {
  overflow-x: auto;
  overflow-y: hidden;
  scroll-snap-type: x mandatory;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-x: contain;
  overscroll-behavior-y: auto;
  scrollbar-width: none;
  touch-action: pan-x pan-y;
  /* 让内部 sticky 元素以内部滚动容器为参照，不影响内部纵向滚动容器 */
}
#right-panel-container::-webkit-scrollbar { display: none; }

#right-panel-wrapper {
  display: flex;
  width: auto;         /* 避免固定 200%，支持任意数量页签 */
  min-width: 100%;
  height: 100%;
}

#right-panel-wrapper .fc-tab-pane {
  flex: 0 0 100%;
  width: 100%;
  scroll-snap-align: start;
  scroll-snap-stop: always;
}

/* 新增：查询榜展开 UI 与子行样式 */
.fc-row-expander {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 22px; height: 22px;
  border-radius: 4px;
  border: 1px solid var(--border-color);
  background: var(--bg-secondary);
  color: var(--text-secondary);
  margin-right: 6px;
  transition: background .15s ease, color .15s ease, border-color .15s ease;
}
.fc-row-expander:hover { background: var(--bg-tertiary); color: var(--text-primary); }
.fc-row-expander i { transition: transform .18s ease; }
.fc-row-expander.is-open i,
.fc-row-expander[aria-expanded="true"] i { transform: rotate(90deg); }

:root {
  --subrow-h: 34px; /* 可按设计微调；与 JS 中 getSubrowHeightPx 一致 */
}

/* 子行基础：固定行高由 .fc-subrow__row 控制 */
.fc-subrow {
  position: relative;     /* 参与堆叠 */
  z-index: 1;             /* 子行在下层 */
}
.fc-subrow td {
  background: none;
}
.fc-subrow td:first-child { padding: 0; }
.fc-subrow .fc-subrow__row {
  height: var(--subrow-h);
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 0;                 /* 改为 0，由列规则单独加 */
  box-sizing: border-box;
}
.fc-subrow td:first-child .fc-subrow__row { padding: 0 .6rem; }
.fc-subrow .fc-subrow__indent { padding-left: 50px; }

.fc-subrow .fc-subrow__dot {
  display: inline-block;     /* 明确生成盒子 */
  width: 6px;
  height: 6px;
  flex: 0 0 6px;             /* 在 flex 容器中固定尺寸且不收缩 */
  border-radius: 50%;
  background-color: var(--text-secondary);
  opacity: .6;
  /* 轻微描边提升不同底色下的可见性（可保留/去除） */
  box-shadow: 0 0 0 0.5px rgba(0,0,0,.12);
}
/* 保持点与文字同一行并留出间距 */
.fc-subrow .fc-subrow__indent {
  display: flex;
  align-items: center;
  gap: 8px;
  padding-left: 80px;  /* 你当前的缩进值，可按需调整 */
}

.fc-subrow td:nth-last-child(2) { text-align: left; }        /* 确保左对齐 */
.fc-subrow td:nth-last-child(2) .fc-subrow__row {
  justify-content: flex-start;
  padding: 0;                                                /* 关键：不要叠加 8px */
}
/* 操作列（最后一列）：保持居中，避免与 td 的 padding 叠加 */
.fc-subrow td:last-child .fc-subrow__row {
  justify-content: center;
  padding: 0;
}

/* 动画中的“下方条目”抬高层级并用表格背景遮盖子行 */
.fc-row-animating {
  position: relative;
  z-index: 3;                    /* 高于子行（1）与普通行（默认层） */
  background: transparent; /* 覆盖视觉缝隙，确保完全遮住子行 */
  will-change: transform;
  -webkit-backdrop-filter: blur(1000px) saturate(100%);
  backdrop-filter: blur(1000px) saturate(100%);
}